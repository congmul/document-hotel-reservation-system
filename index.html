<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="Mark Otto, Jacob Thornton, and Bootstrap contributors">
    <meta name="generator" content="Hugo 0.84.0">
    <title>Document - Hotel Reservation System</title>

    <link rel="canonical" href="https://getbootstrap.com/docs/5.0/examples/sidebars/">

    

    <!-- Bootstrap core CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <link rel="stylesheet" href="https://pro.fontawesome.com/releases/v5.10.0/css/all.css" integrity="sha384-AYmEC3Yw5cVb3ZcuHtOA93w35dYTsvhLPVnYs9eStHfGJvOvKxVfELGroGkvsg+p" crossorigin="anonymous"/>


    <style>
      .bd-placeholder-img {
        font-size: 1.125rem;
        text-anchor: middle;
        -webkit-user-select: none;
        -moz-user-select: none;
        user-select: none;
      }

      @media (min-width: 768px) {
        .bd-placeholder-img-lg {
          font-size: 3.5rem;
        }
      }
    </style>

    
    <link href="./assets/css/sidebars.css" rel="stylesheet">
    <link href="./assets/css/maindocument.css" rel="stylesheet">
  </head>
  <body>
  
  <header>
    <nav class="navbar navbar-expand-lg navbar-light bg-light">
      <div class="container-fluid">
        <a class="navbar-brand" href="#">Hotel Reservation System </a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNav">
          <ul class="navbar-nav">
            <li class="nav-item">
              <a class="nav-link active" aria-current="page" href="https://hotel-react.azurewebsites.net/" target="_blank">Deploy Link</a>
            </li>
          </ul>
        </div>
      </div>
    </nav>
  </header>
  <main>
  <div class="flex-shrink-0 p-3 bg-white" style="width: 280px;">
    <div class="d-flex align-items-center pb-3 mb-3 link-dark text-decoration-none border-bottom">
      <svg class="bi me-2" width="30" height="24"><use xlink:href="#bootstrap"/></svg>
      <a href="#" class="fs-5 fw-semibold link-dark text-decoration-none navMenu">Document</a>
    </div>
    <ul class="list-unstyled ps-0">
      <li class="mb-1">
        <button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle="collapse" data-bs-target="#home-collapse" aria-expanded="true">
          API
        </button>
        <div class="collapse show" id="home-collapse">
          <ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small">
            <li><a href="#" class="link-dark rounded navMenu">User</a></li>
            <li><a href="#" class="link-dark rounded navMenu">Hotel</a></li>
            <li><a href="#" class="link-dark rounded navMenu">Reservation</a></li>
          </ul>
        </div>
      </li>
      <li class="mb-1">
        <button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle="collapse" data-bs-target="#dashboard-collapse" aria-expanded="false">
          Model
        </button>
        <div class="collapse" id="dashboard-collapse">
          <ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small">
            <li><a href="#" class="link-dark rounded navMenu">Overview-model</a></li>
            <li><a href="#" class="link-dark rounded navMenu">User-schema</a></li>
            <li><a href="#" class="link-dark rounded navMenu">Hotel-schema</a></li>
            <li><a href="#" class="link-dark rounded navMenu">Reservation-schema</a></li>
          </ul>
        </div>
      </li>
      <li class="mb-1">
        <button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle="collapse" data-bs-target="#bussiness-logic-collapse" aria-expanded="false">
          Business Logic
        </button>
        <div class="collapse" id="bussiness-logic-collapse">
          <ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small">
            <li><a href="#" class="link-dark rounded navMenu">RoomType-Validation</a></li>
          </ul>
        </div>
      </li>
      <li class="mb-1">
        <button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle="collapse" data-bs-target="#pipeline-collapse" aria-expanded="false">
          Pipeline
        </button>
        <div class="collapse" id="pipeline-collapse">
          <ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small">
            <li><a href="#" class="link-dark rounded navMenu">Client</a></li>
            <li><a href="#" class="link-dark rounded navMenu">Backend</a></li>
          </ul>
        </div>
      </li>
    </ul>
  </div>

  <div class="b-example-divider"></div>

  <!-- Document Main -->
  <section id="api-document-main" class="container documents">
    <article>
      <div class="title">
        <div class="method">
          Hotel Reservation System Document
        </div>
      </div>
      <div class="description">
        <p>
          This reservation system that allows a user to reserve hotel. 
        </p>
        <p class="subTitle">
          User Story
        </p>
        <pre>
          <code>
      AS a user
      I WANT to reserve a hotel room with the Date and number of rooms
      SO THAT I can check all my reservations (Upcoming, Past, Cancel)
          </code>
        </pre>

        <p class="subTitle">
          User Story in detail
        </p>
        <pre>
          <code>
      When visit the site on the homepage, I can:
       * see navigation bar
       * see banner 
       * see three hotel card
       * see 'See More' button
      
      When click one of hotel card, I can:
       * see the hotel information
       * search rooms with Check in, Check out, and number of rooms on a form.
      
      When click submit button, I can:
       * see the available rooms list.

      When click one of reserve button, I can:
       * see warning modal if I'm not loggined.
       * see preview page after login.
       * see Hotel, Card, Billing Address information on the preview page
       * update card and billing address information on the preview page
       * see 'Make a reservation' and 'Cancel' button

      When click Account button on Nav bar, I can:
       * see Overview, My Trips, and Profile tab Menu
       * see total points and nights on Overview menu 
       * see Upcoming, Canceled, and Past Trips sub Tab menu
       * see upcoming reservation information on Upcoming tab menu
       * see 'Update' and 'Cancel' menu
       * When click 'Update' button, I can see Update modal.
       * When click 'Cancel' button, I can see warning notice. 
       * see canceled reservation on Canceled tab menu
       * see past trips on Past Trips tab menu
       * see user information on Profile
       * see 'Update' menu to update the information
          </code>
        </pre>
         
      <p class="subTitle">
        Technologies
      </p>
      <pre>
        <code>
      MERN Stack
      Bootstrap
      Redux Toolkit
      JWT
      i18next
        </code>
      </pre>

    </article>
  </section>
  <!-- Document Main -->

  <section id="api-document-user" class="container documents">

    <!-- GET USER  -->
    <article>
      <div class="title">
        <div class="method">
          GET
        </div>
        <div class="path">
          /api/user/me
        </div>
      </div>
      <div class="description">
        <p>
          Get Single user information with their reservation information.
        </p>
        <p class="subTitle">
          Header
        </p>
        <pre>
          <code>
            headers: {
              "Content-Type": "application/json",
              authorization: `Bearer ${token}`
            }
          </code>
        </pre>
        <p>
          <a class="subTitle" data-bs-toggle="collapse" href="#user-get-response" role="button" aria-expanded="false" aria-controls="user-get-response">
            Response<i class="fas fa-caret-down"></i>
          </a>
        </p>
        <div class="collapse" id="user-get-response">
          <div>
            <pre>
            <code>
              [
                {
                  "address": {
                    "street": "123123",
                    "city": "seattle",
                    "state": "WA",
                    "zipcode": 98001
                  },
                  "cardInfo": {
                    "cardType": "Visa",
                    "cardNumber": "123123123123",
                    "nameOnCard": "Jehyun Jung",
                    "cardCvc": "123",
                    "expDate": "05/2025"
                  },
                  "_id": "6179cdf407103b8184cc9172",
                  "username": "congmul",
                  "password": "$2b$10$XGSGg6BwWpleZDMXUqRm0OYkSws/uvs07gtglP2s/KQ4/mLuDhX.O",
                  "email": "congmul@congmul.com",
                  "phoneNumber": "123-123-123",
                  "points": 125024,
                  "totalNights": 27,
                  "reservation": [
                    {
                      "_id": "6179cf0726bbd2ce4e4615e5",
                      "hotel": "616f1a968cd784a10e38a98c",
                      "roomId": "616f1a968cd784a10e38a98d",
                      "dateStart": "2021-11-02T07:00:00.000Z",
                      "dateEnd": "2021-11-03T07:00:00.000Z",
                      "isCancel": false,
                      "__v": 0
                    },
                  ],
                  "createAt": "2021-10-27T22:08:52.133Z",
                  "__v": 0,
                  "firstName": "Jehyun",
                  "lastName": "Jung"
                }
              ]
            </code>
            </pre>
          </div>
        </div>
    </article>
    <!-- GET USER -->

    <!-- LOGIN USER -->
    <article>
    <div class="title">
      <div class="method">
        POST
      </div>
      <div class="path">
        /api/user/login
      </div>
    </div>
    <div class="description">
      <p>
        Login with Username and Password.
      </p>
      <p class="subTitle">
        Body
      </p>
      <pre>
        <code>
          {
            "username": "congmul",
            "password": "password123"
          }
        </code>
      </pre>
      <p>
        <a class="subTitle" data-bs-toggle="collapse" href="#user-get-login" role="button" aria-expanded="false" aria-controls="user-get-login">
          Response<i class="fas fa-caret-down"></i>
        </a>
      </p>
      <div class="collapse" id="user-get-login">
        <div>
          <pre>
            <code>
              {
                "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9
                          .eyJkYXRhIjp7Il9pZCI6IjYxODBkMGQ
                          .q12wD9C346y-iyAWe1y0wb7M6H5Wj0Kt0A3sRDbQ7VQ",
                "user": {
                  "address": {
                    "street": "123123",
                    "city": "seattle",
                    "state": "WA",
                    "zipcode": 98001
                  },
                  "billingAddress": {
                    "firstName": "Jehyun",
                    "lastName": "Jung",
                    "street": "123",
                    "city": "Seattle",
                    "state": "WA",
                    "zipcode": "98011"
                  },
                  "cardInfo": {
                    "cardType": "Visa",
                    "cardNumber": "123123123",
                    "nameOnCard": "Jehyun Jung",
                    "cardCvc": "123",
                    "expDate": "01/2021"
                  },
                  "_id": "6180d0d0c958ec8587b10360",
                  "username": "congmul",
                  "password": "$2b$10$P1jgWK93JL/dymSv8kyw9ef3tjnpKlxJAeDktK0XahHtC0N/rN/BK",
                  "firstName": "Jehyun Update",
                  "lastName": "Jung",
                  "email": "congmul@congmul.com",
                  "phoneNumber": "123-123-1",
                  "points": 736,
                  "totalNights": 1,
                  "reservation": [
                    "6180d11cc958ec8587b1037a",
                    "6183db933fc2c2e88f4862b9"
                  ],
                  "createAt": "2021-11-02T05:46:56.193Z",
                  "__v": 0
                }
              }
            </code>
          </pre>
        </div>
      </div>
    </article>
    <!-- LOGIN USER -->

    <!-- Signup -->
    <article>
      <div class="title">
        <div class="method">
          POST
        </div>
        <div class="path">
          /api/user/
        </div>
      </div>
      <div class="description">
        <p>
          Sign up
        </p>
        <p class="subTitle">
          Body
        </p>
        <pre>
          <code>
            {
              "username": "congmul",
              "password": "password123",
              "email": "congmul@congmul.com"
            }
          </code>
        </pre>
        <p>
          <a class="subTitle" data-bs-toggle="collapse" href="#user-post-signup" role="button" aria-expanded="false" aria-controls="user-post-signup">
            Response<i class="fas fa-caret-down"></i>
          </a>
        </p>
        <div class="collapse" id="user-post-signup">
          <div>
            <pre>
              <code>
                {
                  "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9
                            .eyJkYXRhIjp7Il9pZCI6IjYxODBkMGQ
                            .q12wD9C346y-iyAWe1y0wb7M6H5Wj0Kt0A3sRDbQ7VQ",
                  "user": {
                    "username": "congmul100",
                    "password": "$2b$10$mJMi2aR0aEITvQtP3gKuHek8mn6lXNSa3ItmFVhOnIFZl2YhNw.Zq",
                    "firstName": "",
                    "lastName": "",
                    "email": "congmul@congmul.com",
                    "points": 0,
                    "totalNights": 0,
                    "reservation": [],
                    "_id": "6183f7733fc2c2e88f486643",
                    "createAt": "2021-11-04T15:08:35.502Z",
                    "__v": 0
                  }
                }
              </code>
            </pre>
          </div>
        </div>
      </article>
    <!-- Signup -->

    <!-- updateUserInfo -->
    <article>
      <div class="title">
        <div class="method">
          PUT
        </div>
        <div class="path">
          /api/user/
        </div>
      </div>
      <div class="description">
        <p>
          Update User information
        </p>
        <p class="subTitle">
          Body <span>(User Schema)</span>
        </p>
        <pre>
          <code>
            {
              username: { type : String, required: true, unique: true },
              password: { type : String, required: true },
              firstName: { type: String, default: ""},
              lastName: { type: String, default: ""},
              email: { type : String, required: false },
              address: { street: String, city: String, zipcode: Number, state: String},
              phoneNumber: String,
            }
          </code>
        </pre>
        <p>
          <a class="subTitle" data-bs-toggle="collapse" href="#user-put-user" role="button" aria-expanded="false" aria-controls="user-put-user">
            Response<i class="fas fa-caret-down"></i>
          </a>
        </p>
        <div class="collapse" id="user-put-user">
          <div>
            <pre>
              <code>
                {
                  message: "Success",
                }
              </code>
            </pre>
          </div>
        </div>
      </article>
    <!-- updateUserInfo -->

    <!-- updateCardInfo -->
    <article>
      <div class="title">
        <div class="method">
          PUT
        </div>
        <div class="path">
          /api/user/cardinfo/:username
        </div>
      </div>
      <div class="description">
        <p>
          Update Card information
        </p>
        <p class="subTitle">
          Body <span>(Card Info Schema)</span>
        </p>
        <pre>
          <code>
            {
              cardInfo: {
                        cardType: String, 
                        cardNumber: String, 
                        nameOnCard: String, 
                        expDate: String, 
                        cardCvc: String },
            }
          </code>
        </pre>
        <p>
          <a class="subTitle" data-bs-toggle="collapse" href="#user-put-cardInfo" role="button" aria-expanded="false" aria-controls="user-put-cardInfo">
            Response<i class="fas fa-caret-down"></i>
          </a>
        </p>
        <div class="collapse" id="user-put-cardInfo">
          <div>
            <pre>
              <code>
                {
                  message: "Success",
                }
              </code>
            </pre>
          </div>
        </div>
      </article>
    <!-- updateCardInfo -->

    <!-- updateBillingAddress -->
    <article>
      <div class="title">
        <div class="method">
          PUT
        </div>
        <div class="path">
          /api/user/billingAddress/:userId
        </div>
      </div>
      <div class="description">
        <p>
          Update Billing address information
        </p>
        <p class="subTitle">
          Body <span>(Billing address Schema)</span>
        </p>
        <pre>
          <code>
            {
              billingAddress: { 
                                firstName: String, 
                                lastName: String, 
                                street: String, 
                                city: String, 
                                zipcode: String, 
                                state: String}
            }
          </code>
        </pre>
        <p>
          <a class="subTitle" data-bs-toggle="collapse" href="#user-put-billingaddress" role="button" aria-expanded="false" aria-controls="user-put-billingaddress">
            Response<i class="fas fa-caret-down"></i>
          </a>
        </p>
        <div class="collapse" id="user-put-billingaddress">
          <div>
            <pre>
              <code>
                {
                  message: "Success",
                }
              </code>
            </pre>
          </div>
        </div>
      </article>
    <!-- updateBillingAddress -->
    </div>
  </section>

  <section id="api-document-hotel" class="container documents">
    <!-- GET Hotel  -->
    <article>
      <div class="title">
        <div class="method">
          GET
        </div>
        <div class="path">
          /api/hotel/
        </div>
      </div>
      <div class="description">
        <p>
          Get Hotel Information
        </p>
        <!-- <p class="subTitle">
          Header
        </p>
        <pre>
          <code>
          </code>
        </pre> -->
        <p>
          <a class="subTitle" data-bs-toggle="collapse" href="#user-get-hotel" role="button" aria-expanded="false" aria-controls="user-get-hotel">
            Response<i class="fas fa-caret-down"></i>
          </a>
        </p>
        <div class="collapse" id="user-get-hotel">
          <div>
            <pre>
            <code>
              [
                {
                  "location": {
                    "street": "2 Summerview Way",
                    "city": "Milwaukee",
                    "zipcode": 53277,
                    "state": "Wisconsin"
                  },
                  "_id": "616f1a968cd784a10e38a971",
                  "name": "Ward",
                  "roomType": [
                    {
                      "name": "Standard",
                      "beds": 3,
                      "price": 337,
                      "_id": "616f1a968cd784a10e38a972",
                      "quantity": 6
                    },
                    {
                      "name": "Family Suite",
                      "beds": 4,
                      "price": 447,
                      "_id": "616f1a968cd784a10e38a973",
                      "quantity": 8
                    }
                  ],
                  "createAt": "2021-10-19T19:20:54.413Z",
                  "__v": 0,
                  "image": "https://cdn.britannica.com/96/115096-050-5AFDAF5D/Bellagio-Hotel-Casino-Las-Vegas.jpg"
                },
                {...},
                {...},
                ...
              ]
            </code>
            </pre>
          </div>
        </div>
    </article>
    <!-- GET Hotel -->


    <!-- Get Hotel by ID -->
    <article>
      <div class="title">
        <div class="method">
          GET
        </div>
        <div class="path">
          /api/hotel/id/:hotelId
        </div>
      </div>
      <div class="description">
        <p>
          Get a Hotel Information by Id
        </p>
        <!-- <p class="subTitle">
          Header
        </p>
        <pre>
          <code>
          </code>
        </pre> -->
        <p>
          <a class="subTitle" data-bs-toggle="collapse" href="#user-get-hotelbyId" role="button" aria-expanded="false" aria-controls="user-get-hotelbyId">
            Response<i class="fas fa-caret-down"></i>
          </a>
        </p>
        <div class="collapse" id="user-get-hotelbyId">
          <div>
            <pre>
            <code>
              {
                "location": {
                  "street": "59203 Schlimgen Street",
                  "city": "Youngstown",
                  "zipcode": 44505,
                  "state": "Ohio"
                },
                "_id": "616f1a968cd784a10e38a981",
                "name": "Tremblay",
                "roomType": [
                  {
                    "name": "Standard",
                    "beds": 4,
                    "price": 309,
                    "_id": "616f1a968cd784a10e38a982",
                    "quantity": 13
                  },
                  {
                    "name": "King Suite",
                    "beds": 4,
                    "price": 122,
                    "_id": "616f1a968cd784a10e38a984",
                    "quantity": 7
                  }
                ],
                "createAt": "2021-10-19T19:20:54.455Z",
                "__v": 0,
                "image": "https://media.cntraveler.com/photos/613aabab7084bd911b309b44/master/pass/Nobu%20Hotel%20Chicago_006-NC-Zen%20Deluxe.jpg"
              }
            </code>
            </pre>
          </div>
        </div>
    </article>
    <!-- Get Hotel By ID -->

    <!-- Get getFeatured -->
    <article>
      <div class="title">
        <div class="method">
          GET
        </div>
        <div class="path">
          /api/hotel/featured
        </div>
      </div>
      <div class="description">
        <p>
          Get Random Selections of 3 hotels
        </p>
        <!-- <p class="subTitle">
          Header
        </p>
        <pre>
          <code>
          </code>
        </pre> -->
        <p>
          <a class="subTitle" data-bs-toggle="collapse" href="#user-get-featured" role="button" aria-expanded="false" aria-controls="user-get-featured">
            Response<i class="fas fa-caret-down"></i>
          </a>
        </p>
        <div class="collapse" id="user-get-featured">
          <div>
            <pre>
            <code>
              [
                {
                  "location": {
                    "street": "3 Truax Way",
                    "city": "Fort Lauderdale",
                    "zipcode": 33330,
                    "state": "Florida"
                  },
                  "_id": "616f1a968cd784a10e38a968",
                  "name": "Paucek",
                  "roomType": [
                    {
                      "name": "Standard",
                      "beds": 3,
                      "price": 337,
                      "_id": "616f1a968cd784a10e38a969",
                      "quantity": 5
                    },
                    {
                      "name": "King Suite",
                      "beds": 4,
                      "price": 122,
                      "_id": "616f1a968cd784a10e38a96a",
                      "quantity": 11
                    },
                    {
                      "name": "Deluxe",
                      "beds": 6,
                      "price": 281,
                      "_id": "616f1a968cd784a10e38a96c",
                      "quantity": 10
                    }
                  ],
                  "createAt": "2021-10-19T19:20:54.373Z",
                  "__v": 0,
                  "image": "https://images.pexels.com/photos/164595/pexels-photo-164595.jpeg?auto=compress&cs=tinysrgb&dpr=1&w=500"
                },
                { ... },
                { ... }
              ]
            </code>
            </pre>
          </div>
        </div>
    </article>
     <!-- Get getFeatured -->
  </section>

  <section id="api-document-reservation" class="container documents">
    <!-- Get All reservation -->
    <article>
      <div class="title">
        <div class="method">
          GET
        </div>
        <div class="path">
          /api/reservation/
        </div>
      </div>
      <div class="description">
        <p>
          Get All reservation information with Hotel Information
        </p>
        <!-- <p class="subTitle">
          Header
        </p>
        <pre>
          <code>
          </code>
        </pre> -->
        <p>
          <a class="subTitle" data-bs-toggle="collapse" href="#reservation-get-reservation" role="button" aria-expanded="false" aria-controls="reservation-get-reservation">
            Response<i class="fas fa-caret-down"></i>
          </a>
        </p>
        <div class="collapse" id="reservation-get-reservation">
          <div>
            <pre>
            <code>
              [
                {
                  "roomQuantity": 1,
                  "_id": "6179cf0726bbd2ce4e4615e5",
                  "hotel": {
                    "location": {
                      "street": "54 Gateway Drive",
                      "city": "New York City",
                      "zipcode": 10115,
                      "state": "New York"
                    },
                    "_id": "616f1a968cd784a10e38a98c",
                    "name": "Schmeler",
                    "roomType": [
                      {
                        "name": "Family Suite",
                        "beds": 2,
                        "price": 368,
                        "_id": "616f1a968cd784a10e38a98d",
                        "quantity": 9
                      },
                      {
                        "name": "Standard",
                        "beds": 3,
                        "price": 337,
                        "_id": "616f1a968cd784a10e38a98e",
                        "quantity": 6
                      },
                      {
                        "name": "King Suite",
                        "beds": 4,
                        "price": 122,
                        "_id": "616f1a968cd784a10e38a98f",
                        "quantity": 8
                      }
                    ],
                    "createAt": "2021-10-19T19:20:54.487Z",
                    "__v": 0,
                    "image": "https://images.pexels.com/photos/2506988/pexels-photo-2506988.jpeg?auto=compress&cs=tinysrgb&dpr=1&w=500"
                  },
                  "roomId": "616f1a968cd784a10e38a98d",
                  "dateStart": "2021-11-02T07:00:00.000Z",
                  "dateEnd": "2021-11-03T07:00:00.000Z",
                  "isCancel": true,
                  "__v": 0
                },
                { ... },
                { ... }
              ]
            </code>
            </pre>
          </div>
        </div>
    </article>
    <!-- Get All reservation -->

    <!-- Get Reservation by Id -->
    <article>
      <div class="title">
        <div class="method">
          GET
        </div>
        <div class="path">
          /api/reservation/:id
        </div>
      </div>
      <div class="description">
        <p>
          Get one reservation information with Hotel Information By Id
        </p>
        <!-- <p class="subTitle">
          Header
        </p>
        <pre>
          <code>
          </code>
        </pre> -->
        <p>
          <a class="subTitle" data-bs-toggle="collapse" href="#reservation-get-reservationById" role="button" aria-expanded="false" aria-controls="reservation-get-reservationById">
            Response<i class="fas fa-caret-down"></i>
          </a>
        </p>
        <div class="collapse" id="reservation-get-reservationById">
          <div>
            <pre>
            <code>
                {
                  "roomQuantity": 1,
                  "_id": "6179cf0726bbd2ce4e4615e5",
                  "hotel": {
                    "location": {
                      "street": "54 Gateway Drive",
                      "city": "New York City",
                      "zipcode": 10115,
                      "state": "New York"
                    },
                    "_id": "616f1a968cd784a10e38a98c",
                    "name": "Schmeler",
                    "roomType": [
                      {
                        "name": "Family Suite",
                        "beds": 2,
                        "price": 368,
                        "_id": "616f1a968cd784a10e38a98d",
                        "quantity": 9
                      },
                      {
                        "name": "Standard",
                        "beds": 3,
                        "price": 337,
                        "_id": "616f1a968cd784a10e38a98e",
                        "quantity": 6
                      },
                      {
                        "name": "King Suite",
                        "beds": 4,
                        "price": 122,
                        "_id": "616f1a968cd784a10e38a98f",
                        "quantity": 8
                      }
                    ],
                    "createAt": "2021-10-19T19:20:54.487Z",
                    "__v": 0,
                    "image": "https://images.pexels.com/photos/2506988/pexels-photo-2506988.jpeg?auto=compress&cs=tinysrgb&dpr=1&w=500"
                  },
                  "roomId": "616f1a968cd784a10e38a98d",
                  "dateStart": "2021-11-02T07:00:00.000Z",
                  "dateEnd": "2021-11-03T07:00:00.000Z",
                  "isCancel": true,
                  "__v": 0
                }
            </code>
            </pre>
          </div>
        </div>
    </article>
    <!-- Get Reservation by Id -->

    <!-- Get Specific Reservation by roomId and Date -->
    <article>
      <div class="title">
        <div class="method">
          GET
        </div>
        <div class="path">
          /api/reservation/day/:checkin/:checkout/:roomId
        </div>
      </div>
      <div class="description">
        <p>
          Get noncancelled reservations that overlap a specified day for a specified room
        </p>
        <p class="subTitle">
          Params Example
        </p>
        <pre>
          <code>
            /api/reservation/day/2021-11-11/2021-11-18/616f1a968cd784a10e38a982
          </code>
        </pre>
        <p>
          <a class="subTitle" data-bs-toggle="collapse" href="#reservation-getByDateRoomId" role="button" aria-expanded="false" aria-controls="reservation-getByDateRoomId">
            Response<i class="fas fa-caret-down"></i>
          </a>
        </p>
        <div class="collapse" id="reservation-getByDateRoomId">
          <div>
            <pre>
            <code>
              [
              ]
            </code>
            </pre>
          </div>
        </div>
    </article>
    <!-- Get Specific Reservation by roomId and Date  -->

    <!-- Post (create) a reservation -->
    <article>
      <div class="title">
        <div class="method">
          POST
        </div>
        <div class="path">
          /api/reservation/:userId/:roomPrice
        </div>
      </div>
      <div class="description">
        <p>
          Create a reservation
        </p>
        <p class="subTitle">
          Body
        </p>
        <pre>
          <code>
            { 
              "hotel": "616f1a968cd784a10e38a9ae",
	            "roomId": "616f1a968cd784a10e38a9b1",
              "roomQuantity": 5,
              "dateStart": "2021-11-22", 
              "dateEnd": "2021-11-24", 
              "cardInfo": { ... },
              "isCancel": 2,
            }
          </code>
        </pre>
        <p>
          <a class="subTitle" data-bs-toggle="collapse" href="#reservation-put-update" role="button" aria-expanded="false" aria-controls="reservation-put-update">
            Response<i class="fas fa-caret-down"></i>
          </a>
        </p>
        <div class="collapse" id="reservation-put-update">
          <div>
            <pre>
            <code>
              {
                message: "Succeed", 
                updatedNights: 50, 
                updatedPoints: 1050
              }
            </code>
            </pre>
          </div>
        </div>
    </article>
    <!-- Post (create) a reservation -->

    <!-- Update Reservation Date and Nums of Room-->
    <article>
      <div class="title">
        <div class="method">
          PUT
        </div>
        <div class="path">
          /api/reservation/update/:reservationId/:userId/:roomPrice
        </div>
      </div>
      <div class="description">
        <p>
          Update Date and number of rooms of a reservation
        </p>
        <p class="subTitle">
          Body
        </p>
        <pre>
          <code>
            { 
              dateStart: '2021-11-22', 
              dateEnd: '2021-11-24', 
              roomQuantity: 2 
            }
          </code>
        </pre>
        <p>
          <a class="subTitle" data-bs-toggle="collapse" href="#reservation-put-update" role="button" aria-expanded="false" aria-controls="reservation-put-update">
            Response<i class="fas fa-caret-down"></i>
          </a>
        </p>
        <div class="collapse" id="reservation-put-update">
          <div>
            <pre>
            <code>
              {
                message: "Succeed", 
                updatedNights: 50, 
                updatedPoints: 1050
              }
            </code>
            </pre>
          </div>
        </div>
    </article>
    <!-- Update Reservation and Nums of Room -->


    <!-- Cancel Reservaion  -->
    <article>
      <div class="title">
        <div class="method">
          PUT
        </div>
        <div class="path">
          /api/reservation/cancel/:id/:userId
        </div>
      </div>
      <div class="description">
        <p>
          Cancel a reservation
        </p>
        <!-- <p class="subTitle">
          Params Example
        </p> -->
        <!-- <pre>
          <code>

          </code>
        </pre> -->
        <p>
          <a class="subTitle" data-bs-toggle="collapse" href="#reservation-put-cancel" role="button" aria-expanded="false" aria-controls="reservation-put-cancel">
            Response<i class="fas fa-caret-down"></i>
          </a>
        </p>
        <div class="collapse" id="reservation-put-cancel">
          <div>
            <pre>
            <code>
              {
                message: "cancel it successfully", 
                updatedNights: 50, 
                updatedPoints: 1050
              }
            </code>
            </pre>
          </div>
        </div>
    </article>
    <!-- Cancel Reservaion  -->
  </section>

  <!-- User Model - Overview -->
  <section id="model-document-overview" class="container documents">
    <article>
      <div class="title border-bottom">
        <div class="method">
          Model Overview
        </div>
      </div>
      <div class="description">
        <p>
          <img src="./assets/img/model-img.png" width="100%" />
        </p>
        <p class="subTitle">
          Relationships
        </p>
        <pre>
          <code>
            -. Model One-to-Many Relationships​

            1) Reference Document Pattern​

            2) Embedded Document Pattern
          </code>
        </pre>
    </article>
  </section>
  <!-- User Model - Overview -->

  <!-- User Model - Schema -->
  <section id="model-document-user" class="container documents">
    <article>
      <div class="title border-bottom">
        <div class="method">
          User Schema
        </div>
      </div>
      <div class="description">
        <pre>
          <code>
            const mongoose = require('mongoose');
            const bcrypt = require('bcrypt');

            const Schema = mongoose.Schema;

            const userSchema = new Schema({
                username: { type : String, required: true, unique: true },
                password: { type : String, required: true },
                firstName: { type: String, default: ""},
                lastName: { type: String, default: ""},
                email: { type : String, required: false },
                address: { street: String, city: String, zipcode: Number, state: String},
                billingAddress: { firstName: String, lastName: String, street: String, city: String, zipcode: String, state: String},
                phoneNumber: String,
                points: { type: Number, default: 0},
                totalNights: { type: Number, default: 0},
                cardInfo: {cardType: String, cardNumber: String, nameOnCard: String, expDate: String, cardCvc: String },
                reservation:[{ type: Schema.Types.ObjectId, ref: 'Reservation'}],
                createAt: { type: Date, default: Date.now }
            })

            // built-in methods in Schema object
            userSchema.pre('save', async function(next) {
                const saltRounds = 10;
                // isNew: Boolean flag specifying if the document is new.
                // isModified(FieldName): Returns true if any of the given paths is modified, else false.
                if(this.isNew || this.isModified('password')){   
                    this.password = await bcrypt.hash(this.password, saltRounds);
                }
            })

            userSchema.methods.isCorrectPassword = function(password) {
                return bcrypt.compare(password, this.password);
            }

            const User = mongoose.model('User', userSchema);

            module.exports = User;
          </code>
        </pre>
    </article>
  </section>
  <!-- User Model - Schema -->

    <!-- Hotel Model - Schema -->
    <section id="model-document-hotel" class="container documents">
      <article>
        <div class="title border-bottom">
          <div class="method">
            Hotel Schema
          </div>
        </div>
        <div class="description">
          <p class="subTitle">
            Hotel Schema
          </p>
          <pre>
            <code>
            const mongoose = require('mongoose');
            const roomTypeSchema = require('./RoomType');
            const Schema = mongoose.Schema;
                        
            const hotelSchema = new Schema({
                name: { type : String, required: true, unique: true },
                location: { street: String, city: String, zipcode: Number, state: String},
                roomType: [roomTypeSchema],
                createAt: { type: Date, default: Date.now },
                image: {type: String, default: "https://images.financialexpress.com/2020/09/hotel-660x440-620x413.jpg"}
            })
            
            const Hotel = mongoose.model('Hotel', hotelSchema);
            
            module.exports = Hotel;
            </code>
          </pre>
          <p class="subTitle">
            roomType Schema
          </p>
          <pre>
            <code>
              const mongoose = require('mongoose');

              const Schema = mongoose.Schema;
              
              const roomTypeSchema = new Schema({
                  name: { type : String, required: true},
                  beds: Number,
                  price: Number,
                  quantity: Number
              })
              
              
              module.exports = roomTypeSchema;
            </code>
          </pre>
      </article>
    </section>
    <!-- Hotel Model - Schema -->

    <!-- Reservation Model - Schema -->
    <section id="model-document-reservation" class="container documents">
      <article>
        <div class="title border-bottom">
          <div class="method">
            Reservaion Schema
          </div>
        </div>
        <div class="description">
          <pre>
            <code>
              const mongoose = require('mongoose');
              const Schema = mongoose.Schema;
              
              const reservationSchema = new Schema({
                  hotel:{ type: Schema.Types.ObjectId, ref: 'Hotel'},
                  roomId: {type: Schema.Types.ObjectId, ref: 'RoomType'},
                  roomQuantity: {type: Number, default: 1},
                  dateStart: { type: Date },
                  dateEnd: { type: Date },
                  cardInfo: { cardType: String, cardNumber: String, nameOnCard: String, expDate: String, cardCvc: String },
                  isCancel: { type: Boolean, default: false }
              })
              
              const Reservation = mongoose.model('Reservation', reservationSchema);
              
              module.exports = Reservation;
            </code>
          </pre>
      </article>
    </section>
    <!-- Reservation Model - Schema -->

  <!-- Date Validation -->
  <section id="business-logic-document-roomType" class="container documents">
    <article>
      <div class="title border-bottom">
        <div class="method">
          Room Type Validation
        </div>
      </div>
      <div class="description">
        <p>
          We want to check an available specific room type which has a limited number of rooms during a specific date
        </p>
        <p>
          1. Get reservations that are not canceled and overlap a specific day for a specific room
        </p>
        <pre>
          <code>
        const allUpcomingByThisRoom = allReservation.filter(reservation => {
          if(new Date(reservation.dateStart)  > new Date() 
          && reservation.roomId === roomId 
          && reservation.isCancel !== true
          && reservation._id !== reservationId){
              return reservation;
          }
      })
          </code>
        </pre>

        <p>
          2. Get the selected reservation that you want to update.
        </p>
        <pre>
          <code>
        const thisReservation = allReservation.filter(reservation => reservation._id === reservationId);
        const thisRoomType = thisReservation[0].hotel.roomType.filter(room => room._id === roomId)
          </code>
        </pre>

        <p>
          3. Creat simple hash Table to organize the number of rooms on a specific date
        </p>
        <pre>
          <code>
        let dateHashTable = {};
        for(let i = 0; i < allUpcomingByThisRoomState.length; i++){
            let dateStart = new Date(allUpcomingByThisRoomState[i].dateStart)
            let numRooms = allUpcomingByThisRoomState[i].roomQuantity;

            // Calculate difference days between Start and End.
            let dateEnd = new Date(allUpcomingByThisRoomState[i].dateEnd);
            let diffTime = Math.abs(dateEnd - dateStart);
            let diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));
            console.log("diffDays", diffDays);

            for(let i = 0; i < diffDays; i++){
                let thisDate = `${dateStart.getFullYear()}-${dateStart.getMonth()+1}-${dateStart.getDate()+1}`;
                if(dateHashTable[thisDate] != null) {
                    dateHashTable[thisDate] += numRooms;
                }else{
                    dateHashTable[thisDate] = numRooms;
                }

                // Set Next Day
                dateStart.setDate(dateStart.getDate() + 1);
            }
        }

        // result - Upcoming Reservations with the Room.
        // {
        //  "2021-11-15": 1,
        //  "2021-11-17": 2,
        //  "2021-11-20": 2,
        //  "2021-11-25": 5,
        //  "2021-12-23": 2,
        //  "2021-12-24": 10,
        //  "2021-12-25": 2,
        //  "2021-12-30": 2,
        // }
          </code>
        </pre>
      

        <p>
          4. Compare user input date and number of rooms with Hashtable.
        </p>
        <pre>
          <code>
        // Calculate difference days between Start and End.
        let inputNumRooms = parseInt(inputReservationForUpdate.numRooms);
        let inputDateStart = new Date(inputReservationForUpdate["update-checkin"])
        let inputDateEnd = new Date(inputReservationForUpdate["update-checkout"]);
        let diffTime = Math.abs(inputDateEnd - inputDateStart);
        let diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));
        console.log("diffDays", diffDays);

        let isCheckAvailableRoom = true;
        let notAvailableDate = [];
        for(let i = 0; i < diffDays; i++){ 
            let thisDate = `${inputDateStart.getFullYear()}-${inputDateStart.getMonth()+1}-${inputDateStart.getDate()+1}`;
            console.log(thisDate);
            if(dateHashTable[thisDate] != null 
                && dateHashTable[thisDate] + inputNumRooms > thisRoomType.quantity){
                    console.log("Room is not available on the date.")
                    
                    notAvailableDate.push(thisDate);
                    isCheckAvailableRoom = false;
                }
            else if(inputNumRooms > thisRoomType.quantity){
                console.log("Room is not available on the date.")
                    
                notAvailableDate.push(thisDate);
                isCheckAvailableRoom = false;
            }
            // Set Next Day
            inputDateStart.setDate(inputDateStart.getDate() + 1);
        }
          </code>
        </pre>
    

    </article>
  </section>
  <!-- Date Validation -->
</main>


<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>

      <script src="sidebars.js"></script>
      <script src="./assets/js/script.js"></script>
  </body>
</html>
